{"version":3,"file":"main.js","mappings":"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","sources":["webpack://sr79-main/webpack/bootstrap","webpack://sr79-main/webpack/runtime/compat get default export","webpack://sr79-main/webpack/runtime/define property getters","webpack://sr79-main/webpack/runtime/hasOwnProperty shorthand","webpack://sr79-main/external commonjs \"express\"","webpack://sr79-main/external commonjs \"helmet\"","webpack://sr79-main/external commonjs \"cors\"","webpack://sr79-main/external commonjs \"express-rate-limit\"","webpack://sr79-main/external node-commonjs \"path\"","webpack://sr79-main/external node-commonjs \"url\"","webpack://sr79-main/external commonjs \"dotenv\"","webpack://sr79-main/external node-commonjs \"fs/promises\"","webpack://sr79-main/./src/swish/server/handlers/UserHandler.ts","webpack://sr79-main/./src/swish/server/handlers/ChatHandler.ts","webpack://sr79-main/./src/swish/server/index.ts","webpack://sr79-main/./src/swish/server/routes/swish.ts","webpack://sr79-main/./src/main.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"express\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"helmet\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"cors\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"express-rate-limit\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"path\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"url\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"dotenv\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"fs/promises\");","import path from \"path\";\nimport fs from \"fs/promises\";\nimport {fileURLToPath} from \"url\";\nimport type {UserIndex } from \"../types/UserHandler.types.ts\";\n\n\n// Setup present directory.\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n/* Data Store directory. */\nconst DATA_STORE_DIR = path.join(__dirname, \"..\", \".data_store\");\n\n/* User Index. */\nconst USER_INDEX_FILE = path.join(DATA_STORE_DIR, \"user_index.json\");\n\nexport let USER_INDEX: UserIndex = {};\n\n/**\n * Checks if the directory are in order.\n */\nexport async function checkDirectoryConfig(): Promise<void> {\n  try {\n    // Check if \".data_store\" exists.\n    await fs.access(DATA_STORE_DIR);\n\n    try {\n      const data = await fs.readFile(USER_INDEX_FILE, \"utf8\");\n      USER_INDEX = JSON.parse(data);\n      console.log(\"\\n----USER INDEX Setup successfully. ----\\n\");\n\n    } catch (error: unknown) {\n      if (error instanceof Error)\n        console.log(`user_index.json not found: ${error.message}`);\n      else\n        console.log(`Unknown error occurred: ${error}`);\n      \n      /* At least create the file, If not sure what needs to be done. */\n      await createUserIndexFile();\n    }\n  } catch (error: unknown) {\n    if (error instanceof Error)\n      console.log(`.data_store does not exists: ${error.message}`);\n    else\n      console.log(`Unknown error occurred: ${error}`);\n    await createUserIndexFile();\n  }\n\n  console.log(\"\\n---- Directory Configurations Loaded ----\\n\");\n}\n\n/**\n * Creates the user index file and data store directory\n * if not already created.\n */\nexport async function createUserIndexFile() {\n  try {\n    await fs.mkdir(DATA_STORE_DIR);\n    console.log(\"\\n----Data Store established... ----\\n\");\n\n    await fs.writeFile(USER_INDEX_FILE, JSON.stringify(USER_INDEX), \"utf8\");\n    console.log(\"\\n---- User Index created... ----\\n\");\n  } catch (error: unknown) {\n    if (error instanceof Error)\n      console.log(`Internal error occurred: ${error.message}`);\n    else\n      console.log(`Unknown error occurred: ${error}`);\n  }\n}\n\nexport async function updateUserIndexFile() {\n  try {\n    await fs.writeFile(USER_INDEX_FILE, JSON.stringify(USER_INDEX));\n    console.log(\"\\n---- USER INDEX updated... ---- \\n\");\n  } catch (error: unknown) {\n    if (error instanceof Error)\n      console.log(`Internal error occurred: ${error.message})`);\n    else \n      console.log(`Unknown error occurred: ${error}`)\n  }\n}\n","import path from \"path\";\nimport fs from \"fs/promises\";\nimport {fileURLToPath} from \"url\";\nimport type { ChatIndex, ChatInfo } from \"../types/ChatHandler.types\";\n\n// Setup present directory.\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n/* Data Store directory. */\nconst DATA_STORE_DIR = path.join(__dirname, \"..\", \".data_store\");\n\n/* Chat Index. */\nconst CHAT_INDEX_FILE = path.join(DATA_STORE_DIR, \"chat_index.json\");\n\nexport let CHAT_INDEX: ChatIndex = {};\n\n/**\n * Checks if the directory are in order.\n */\nexport async function checkChatIndexFile() {\n  try {\n    const data: string = await fs.readFile(CHAT_INDEX_FILE, \"utf8\");\n    CHAT_INDEX = JSON.parse(data);\n    console.log(\"\\n----CHAT INDEX Setup successfully. ----\\n\");\n\n  } catch (err: unknown) {\n    if (err instanceof Error)\n      console.log(`chat_index.json not found: ${err.message}`);\n    else\n      console.log(`Unknown error occurred: ${err}`);\n\n    await createChatIndexFile();\n  }\n}\n\n/**\n * Creates the user index file and data store directory\n * if not already created.\n */\nexport async function createChatIndexFile() {\n  try {\n    await fs.writeFile(CHAT_INDEX_FILE, JSON.stringify(CHAT_INDEX), \"utf8\");\n    console.log(\"\\n---- CHAT INDEX Created... ----\\n\");\n  } catch (err: unknown) {\n    if (err instanceof Error)\n      console.log(`Internal error occurred: ${err.message}`);\n    else\n      console.log(`Unknown error occurred: ${err}`);\n  }\n}\n\n/**\n * Updates the storage with the recent Chat data.\n */\nexport async function updateChatIndexFile(chat: ChatInfo | null) {\n  try {\n    if (chat) {\n      const userId = CHAT_INDEX[chat.id];\n      if (userId) {\n        const recipientId = userId[chat.recipient];\n        if (recipientId && chat.recipient in userId) {\n          recipientId[\"preview\"] = chat.message;\n          recipientId[\"timestamp\"] = chat.timestamp;\n          recipientId[\"history\"].push({\n            \"direction\": \"self\",\n            \"timestamp\": chat.timestamp,\n            \"message\": chat.message\n          });\n        } else {\n          userId[chat.recipient] = {\n            \"preview\": chat.message,\n            \"timestamp\": chat.timestamp,\n            \"history\": [{\n              \"direction\": \"self\",\n              \"timestamp\": chat.timestamp,\n              \"message\": chat.message\n            }]\n          }\n        }\n      }\n      \n      const recipientId = CHAT_INDEX[chat.recipient];\n      if (recipientId) {\n        const userId = recipientId[chat.id];\n        if (userId && chat.id in recipientId) {\n          if (userId && chat.id in recipientId)\n          userId[\"preview\"] = chat.message;\n          userId[\"timestamp\"] = chat.timestamp;\n          userId[\"history\"].push({\n            \"direction\": \"recipient\",\n            \"timestamp\": chat.timestamp,\n            \"message\": chat.message\n          });\n        } else {\n          recipientId[chat.id] = {\n            \"preview\": chat.message,\n            \"timestamp\": chat.timestamp,\n            \"history\": [{\n              \"direction\": \"recipient\",\n              \"timestamp\": chat.timestamp,\n              \"message\": chat.message\n            }]\n          }\n        }\n      }\n    }\n\n    await fs.writeFile(CHAT_INDEX_FILE, JSON.stringify(CHAT_INDEX));\n    console.log(\"\\n---- CHAT INDEX Updated... ---- \\n\");\n  } catch (err: unknown) {\n    if (err instanceof Error)\n      console.log(`Error Updating Chat Index: ${err.message}`);\n    else\n      console.log(`Unknown error occurred: ${err}`);\n  }\n}\n","import * as UserHandler from './handlers/UserHandler';\nimport * as ChatHandler from './handlers/ChatHandler';\n\nexport async function initSwish() {\n  await UserHandler.checkDirectoryConfig();\n  await ChatHandler.checkChatIndexFile();\n}\n","import express from 'express';\nimport * as ChatHandler from \"../handlers/ChatHandler\";\nimport * as UserHandler from \"../handlers/UserHandler\";\n\nconst router = express.Router();\n\n// Serve Swish index\nrouter.get('/', (_req, res) => {\n  res.sendFile('index.html', { root: './src/swish/dist/' });\n});\n\n// Handle user operations\nrouter.post('/user', async (req, res) => {\n  try {\n    const userData = req.body.body;\n  \n    // user id received with request from client.\n    const reqUserId = userData.id;\n\n    // user id stored in the index at the server.\n    const UserId = UserHandler.USER_INDEX[userData.id]\n\n    if (reqUserId && UserId && userData.id in UserHandler.USER_INDEX) {\n      // If password field exists in the payload, then check for authenticity.\n      if (\"password\" in userData) {\n        if (UserId[\"password\"] === userData.password) {\n          res.json({\n            status: true,\n            message: \"User Authenticated.\",\n\n            // If the authType is sign-in, then send the chat\n            // history as well otherwise for sign-up empty list.\n            chatHistory: (userData.authType === \"sign-in\")\n                ? ChatHandler.CHAT_INDEX[userData.id]\n                : []\n          });\n        } else {\n          res.json({\n            status: false,\n            message: \"Invalid Credentials.\"\n          });\n        }\n      } else {\n        // Return that the user exists, in case of normal user check.\n        res.json({status: true});\n      }\n    } else {\n      // Enter new user details.\n      UserHandler.USER_INDEX[userData.id] = {\n        \"password\": userData.password\n      };\n      ChatHandler.CHAT_INDEX[userData.id] = {};\n\n      await UserHandler.updateUserIndexFile();\n      await ChatHandler.updateChatIndexFile(null);\n      res.json({ status: true });\n    }\n  } catch (err: any) {\n    console.error('Error handling user:', err.message);\n    res.status(400).json({status: false});\n  }\n});\n\nrouter.post(\"/user/chat\", async (req, res) => {\n  try {\n    const userData = req.body.body;\n    if (authenticateCredentials(userData.id, userData.password)) {\n      await ChatHandler.updateChatIndexFile(userData);\n      res.status(200).json({status: true});\n    } else {\n      res.status(400).json({status: false});\n    }\n  } catch (err: any) {\n    console.log(`Error Handling Chat Session: ${err.message}`);\n    res.status(400).json({status: false});\n  }\n})\n\nfunction authenticateCredentials(id: string, password: string) {\n  if (!id || !password) return false;\n\n  const userId = UserHandler.USER_INDEX[id];\n  \n  if (userId) {\n    return (id in UserHandler.USER_INDEX && password === userId.password)\n  } else \n    return false;\n}\n\nexport { router };\n","import express from 'express';\nimport helmet from 'helmet';\nimport cors from 'cors';\nimport rateLimit from 'express-rate-limit';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\nimport dotenv from 'dotenv';\nimport { initSwish } from \"./swish/server/index\"\nimport { router as swishRouter } from './swish/server/routes/swish';\n\n\n// Local app configurations.\ndotenv.config();\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst port = process.env[\"PORT\"] || 2795;\n\nconst app = express();\n\n/**\n * Global middlewares.\n */\napp.use(helmet());\napp.use(cors());\napp.use(express.json());\napp.use(rateLimit({windowMs: 15 * 60 * 1000, max: 1000}));\n\n/**\n * Static Files router.\n */\napp.use('/swish', express.static(path.join(__dirname, '/swish/dist')));\n\n/**\n * Swish service handler.\n */\napp.use('/swish', swishRouter);\n\n/**\n * Root URL Handler.\n */\napp.get('/', (_req, res) => {\n  res.end('Channel #SR79 Active');\n});\n\n/**\n * Internal Server Error Handler.\n */\napp.use((err: Error, _req: express.Request, res: express.Response, _next: express.NextFunction) => {\n  console.error(err.stack);\n  res.status(500).send('Internal Server Error');\n});\n\n/**\n * 404 Handler.\n */\napp.use((_req, res) => {\n  res.status(404).send('Not Found');\n});\n\n// Start server\nasync function startServer() {\n  try {\n    // Initialize the swish's initial service.\n    await initSwish();\n\n    app.listen(port, () => {\n      console.log(`Channel SR79 Active; Port: ${port}`);\n    });\n  } catch (error) {\n    console.error('Server Error during startup:', error);\n    process.exit(1);\n  }\n}\n\nstartServer();\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","require","fileURLToPath","DATA_STORE_DIR","USER_INDEX_FILE","USER_INDEX","async","createUserIndexFile","console","log","JSON","stringify","error","Error","message","CHAT_INDEX_FILE","CHAT_INDEX","updateChatIndexFile","chat","userId","id","recipientId","recipient","timestamp","push","err","initSwish","data","parse","createChatIndexFile","router","_req","res","sendFile","root","post","req","userData","body","reqUserId","UserId","password","json","status","chatHistory","authType","authenticateCredentials","port","process","env","app","use","windowMs","max","end","_next","stack","send","listen","exit","startServer"],"sourceRoot":""}